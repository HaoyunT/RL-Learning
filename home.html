<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>强化学习学习笔记 | 唐浩云</title>

<!-- 数学公式渲染 -->
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async
 src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

<!-- Prism.js 代码高亮 -->
<link href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.min.js"></script>

<style>
/* ===== 全局样式 ===== */
body {
  margin: 0;
  font-family: "Segoe UI", "Roboto", sans-serif;
  background-color: #0d0d0d;
  color: #e0e0e0;
  line-height: 1.7;
  scroll-behavior: smooth;
}

/* 背景粒子 */
#trailCanvas {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  z-index: 0;
  pointer-events: none;
}

/* Header */
header {
  position: sticky;
  top: 0;
  z-index: 10;
  text-align: center;
  background: rgba(20, 20, 20, 0.8);
  padding: 20px;
  backdrop-filter: blur(6px);
  box-shadow: 0 2px 8px rgba(0,0,0,0.6);
}
header h1 {
  font-size: 2.4rem;
  color: #00bcd4;
  margin: 0;
  text-shadow: 0 0 10px rgba(0,188,212,0.6);
}

/* 导航栏 */
nav ul {
  list-style: none;
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  padding: 0;
  margin: 10px 0 0;
}
nav li { margin: 5px 15px; }
nav a {
  color: #e0e0e0;
  text-decoration: none;
  font-weight: bold;
  transition: 0.3s;
}
nav a:hover, nav a.active { color: #00bcd4; text-shadow: 0 0 5px #00bcd4; }

/* 内容区 */
main {
  position: relative;
  z-index: 5;
  max-width: 900px;
  margin: 20px auto;
  padding: 20px;
}
.chapter {
  background: rgba(30,30,30,0.85);
  border-radius: 12px;
  padding: 25px;
  margin-bottom: 40px;
  box-shadow: 0 0 20px rgba(0,188,212,0.1);
  transition: transform 0.2s;
}
.chapter:hover { transform: translateY(-3px); }
.chapter h2 {
  color: #00bcd4;
  border-bottom: 2px solid #00bcd4;
  padding-bottom: 6px;
}
pre {
  background: #1e1e1e;
  padding: 15px;
  border-radius: 8px;
  overflow-x: auto;
  font-size: 0.95rem;
}

/* 表格优化 */
table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 15px;
  background: rgba(255,255,255,0.05);
  border-radius: 8px;
  overflow: hidden;
}
table th, table td {
  padding: 10px 15px;
  border-bottom: 1px solid rgba(255,255,255,0.1);
}
table th {
  background: rgba(0,188,212,0.2);
  color: #00e5ff;
}

/* Footer */
footer {
  text-align: center;
  padding: 15px;
  margin: 40px 0 10px;
  font-size: 0.9rem;
  color: #aaa;
  background: rgba(20,20,20,0.7);
  border-radius: 8px;
}
footer span {
  color: #00bcd4;
  animation: glow 2s infinite alternate;
}
@keyframes glow {
  from { text-shadow: 0 0 5px #00bcd4; }
  to { text-shadow: 0 0 15px #00bcd4; }
}
</style>
</head>

<body>
<canvas id="trailCanvas"></canvas>

<header>
  <h1>强化学习学习笔记</h1>
  <nav>
    <ul>
      <li><a href="#chapter0">环境配置</a></li>
      <li><a href="#chapter1">基本概念</a></li>
      <li><a href="#chapter2">贝尔曼方程</a></li>
      <li><a href="#chapter3">贝尔曼最优方程</a></li>
      <li><a href="#chapter4">策略迭代</a></li>
      <li><a href="#chapter5">值迭代</a></li>
      <li><a href="#chapter6">蒙特卡洛方法</a></li>
    </ul>
  </nav>
</header>

<main>
  <section id="chapter0" class="chapter">
    <h2>第零章：环境配置 & GitHub 项目上传</h2>
    <pre><code class="language-bash"># 配置镜像源
conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main
conda config --set show_channel_urls yes

# 创建虚拟环境
cd /d G:\test
conda create --prefix .\.venv python=3.11
conda activate G:\test\.venv

# 安装依赖
conda install numpy pandas matplotlib pytorch torchvision torchaudio pytorch-cuda=12.1 -c pytorch -c nvidia

# 上传到 GitHub
git init
git remote add origin https://github.com/HaoyunT/test.git
git checkout -b main
git add .
git commit -m "初始化项目"
git push -u origin main</code></pre>
  </section>

  <!-- 这里省略前5章，你已有内容可直接粘贴 -->
  <!-- 以下是第6章：蒙特卡洛方法 -->
  <section id="chapter6" class="chapter">
    <h2>第六章：蒙特卡洛方法（Monte Carlo Methods）</h2>

    <p>蒙特卡洛方法（MC）是一类基于<strong>采样</strong>的策略评估与控制算法，无需环境模型。</p>

    <h3>1. 基本思想</h3>
    <p>通过采样回合 \((S_0, A_0, R_1, \dots, S_T)\)，计算每个时间步的回报：</p>
    <p>$$
    G_t = R_{t+1} + \gamma R_{t+2} + \cdots = \sum_{k=0}^{T-t-1} \gamma^k R_{t+k+1}
    $$</p>

    <h3>2. 状态价值估计</h3>
    <p>$$
    V(s) = \mathbb{E}_\pi[G_t | S_t=s] \approx \frac{1}{N(s)} \sum_i G^{(i)}(s)
    $$</p>

    <h3>3. 蒙特卡洛策略评估算法</h3>
    <pre><code class="language-python"># 给定策略 π，评估其状态价值函数 V(s)
V, Returns = {}, {}
for episode in range(num_episodes):
    episode_data = generate_episode(policy)
    G = 0
    for (s, a, r) in reversed(episode_data):
        G = γ * G + r
        if s not in [x[0] for x in episode_data[:-1]]:
            Returns.setdefault(s, []).append(G)
            V[s] = np.mean(Returns[s])</code></pre>

    <h3>4. 蒙特卡洛控制（MC Control）</h3>
    <p>评估 <code>Q(s,a)</code> 后，通过 ε-贪婪策略改进：</p>
    <pre><code class="language-python">ε = 0.1
for s in states:
    best_a = argmax_a(Q[s,a])
    for a in actions:
        π[a|s] = (1-ε + ε/len(actions)) if a == best_a else (ε/len(actions))</code></pre>
  </section>
</main>

<footer>
  <p>© 2025 <span>Haoyun Tang</span> | Reinforcement Learning Notes</p>
</footer>

<!-- ===== 动态粒子特效 ===== -->
<script>
const canvas = document.getElementById("trailCanvas");
const ctx = canvas.getContext("2d");
let particles = [];
function resize() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
window.addEventListener("resize", resize);
resize();
document.addEventListener("mousemove", e => {
  for (let i = 0; i < 2; i++) {
    particles.push({x: e.clientX, y: e.clientY, alpha: 1, r: Math.random()*3+1});
  }
});
function animate() {
  ctx.fillStyle = "rgba(0,0,0,0.2)";
  ctx.fillRect(0, 0, canvas.width, canvas.height);
  particles.forEach(p => {
    p.y -= 0.3;
    p.alpha -= 0.01;
    ctx.beginPath();
    ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
    ctx.fillStyle = `rgba(0,188,212,${p.alpha})`;
    ctx.fill();
  });
  particles = particles.filter(p => p.alpha > 0);
  requestAnimationFrame(animate);
}
animate();
</script>

<!-- ===== 导航自动高亮 ===== -->
<script>
const navLinks = document.querySelectorAll("nav a");
window.addEventListener("scroll", () => {
  let fromTop = window.scrollY + 120;
  navLinks.forEach(link => {
    const section = document.querySelector(link.getAttribute("href"));
    if (section.offsetTop <= fromTop && section.offsetTop + section.offsetHeight > fromTop)
      link.classList.add("active");
    else
      link.classList.remove("active");
  });
});
</script>
</body>
</html>
